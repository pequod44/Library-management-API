# Library Management API

## Описание

**Library Management API** — это REST API, разработанный с использованием FastAPI, предназначенный для управления библиотечным каталогом. API предоставляет возможность работать с книгами, авторами и выдачей книг читателям.

## Основной функционал

### Работа с авторами
- Создание автора: `POST /authors`
- Получение списка авторов: `GET /authors`
- Получение информации об авторе по ID: `GET /authors/{id}`
- Обновление информации об авторе: `PUT /authors/{id}`
- Удаление автора: `DELETE /authors/{id}`

### Работа с книгами
- Добавление книги: `POST /books`
- Получение списка книг: `GET /books`
- Получение информации о книге по ID: `GET /books/{id}`
- Обновление информации о книге: `PUT /books/{id}`
- Удаление книги: `DELETE /books/{id}`

### Работа с выдачами
- Создание записи о выдаче книги: `POST /borrows`
- Получение списка всех выдач: `GET /borrows`
- Получение информации о выдаче по ID: `GET /borrows/{id}`
- Завершение выдачи: `PATCH /borrows/{id}/return`

## Бизнес-логика

1. **Проверка доступности экземпляров книги:**
   - При создании записи о выдаче API проверяет наличие доступных экземпляров книги.
   - Если экземпляры недоступны, возвращается соответствующая ошибка.

2. **Изменение количества доступных экземпляров:**
   - При выдаче книги количество доступных экземпляров уменьшается.
   - При возврате книги количество доступных экземпляров увеличивается.

## Структура базы данных

Проект использует SQLAlchemy (версия 2) для взаимодействия с базой данных. Спроектированы следующие таблицы:

![Снимок экрана 2024-12-11 174803](https://github.com/user-attachments/assets/850e36e4-8b39-4a3c-a2f0-7131a13683a2)

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/pequod44/Library-management-API.git
   cd Library-management-API
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Настройте переменные окружения в файле `.env`:
   ```env
   DATABASE_URL=postgresql://<user>:<password>@<host>:<port>/<database>
   ```

4. Запустите приложение:
   ```bash
   uvicorn app.main:app --reload
   ```

## Тестирование

Запустите тесты с использованием pytest:
```bash
pytest
```
